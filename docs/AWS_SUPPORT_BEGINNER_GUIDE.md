# 🚀 AWSサポートやりとりくん - 完全初心者ガイド

**所要時間**: 約15分で完了
**対象**: GitHub初心者〜中級者
**前提知識**: なし！このガイドで全て説明します

---

## 🎯 このツールで何ができる？

GitHub Issueを作成するだけで、**AIが自動的にAWSサポート向けの問い合わせ文を生成**してくれます！

### ❌ 従来の方法（面倒）
```
1. AWSサポートコンソールを開く
2. 長いフォームに手動入力
3. 問い合わせ文を自分で整形して書く
4. 送信して、メールで状況を追跡
```

### ⭕ このツールを使う（簡単！）
```
1. GitHub Issueをテンプレートから作成（3分）
2. AIが自動で整形された問い合わせ文を生成（30秒）
3. コピー＆ペーストでAWSサポートに送信
```

**時間短縮**: 約10分 → 約5分

---

## 📊 セットアップ全体フロー

```
START
  ↓
┌──────────────────────────────────────┐
│ ステップ1: APIキー取得 (5-10分)      │
│ OpenAI または Claude のアカウント作成 │
└──────────────────────────────────────┘
  ↓
┌──────────────────────────────────────┐
│ ステップ2: GitHub Secrets登録 (2分)  │
│ APIキーをGitHubに安全に保存         │
└──────────────────────────────────────┘
  ↓
┌──────────────────────────────────────┐
│ ステップ3: ラベル作成 (1分)          │
│ "aws-support" ラベルを1つ追加      │
└──────────────────────────────────────┘
  ↓
┌──────────────────────────────────────┐
│ ステップ4: GitHub Actions有効化 (1分)│
│ 自動実行機能をONにする              │
└──────────────────────────────────────┘
  ↓
┌──────────────────────────────────────┐
│ ステップ5: テスト実行 (2分)          │
│ 最初のIssueを作成して動作確認       │
└──────────────────────────────────────┘
  ↓
COMPLETE ✅
```

**合計所要時間**: 約15-20分

---

## ✅ 事前準備チェックリスト

作業を始める前に、以下を確認してください：

- [ ] **GitHubアカウント**を持っている
  - 持っていない → [GitHub登録](https://github.com/signup)（無料）
- [ ] このリポジトリへの**アクセス権**がある
  - 確認方法: リポジトリページで「Settings」タブが見えればOK
  - 見えない → リポジトリ管理者に権限をリクエスト
- [ ] **OpenAI APIキー**または**Claude APIキー**を持っている
  - 持っていない → 下記の「APIキー取得方法」参照
- [ ] **インターネット接続**がある
- [ ] **クレジットカード**を持っている（API料金支払い用）
  - OpenAI/Claude の利用には少額の料金が発生します

---

## 📖 用語説明（初心者向け）

| 用語 | 意味 |
|------|------|
| **GitHub** | ソースコード管理サービス（このツールを動かす場所） |
| **Issue** | タスクや問題を記録する場所（メモ帳のようなもの）|
| **GitHub Actions** | 自動実行プログラム（Issueを作ると自動で動く）|
| **API Key** | AIサービスを使うための鍵（パスワードのようなもの）|
| **Secret** | 秘密情報を安全に保存する場所（暗号化されたパスワード保管庫）|
| **Label** | Issue につける付箋（分類用のタグ）|

---

## 🔑 準備1: APIキーを取得する

### オプション A: OpenAI APIキー（推奨）

**料金**: 1回の生成で約2-3円（GPT-4使用時）

#### ステップ1-A: OpenAI アカウント作成

1. ブラウザで [OpenAI Platform](https://platform.openai.com/) を開く
2. 右上の「**Sign up**」をクリック
3. メールアドレスを入力、またはGoogleアカウントでログイン
4. メール認証を完了

#### ステップ2-A: APIキーを作成

1. ログイン後、右上のアイコンをクリック
2. 「**API keys**」を選択
3. 「**Create new secret key**」をクリック
4. 名前を入力（例: `aws-support-bot`）
5. 「**Create**」をクリック
6. **表示されたキーをコピー**（`sk-`で始まる長い文字列）
   - ⚠️ **超重要**: この画面を閉じると二度と表示されません！
7. メモ帳などに安全に保存

#### ステップ3-A: 支払い方法を登録

1. 左サイドバーの「**Settings**」→「**Billing**」
2. 「**Add payment method**」でクレジットカードを登録
3. 少額（$5-$10）をチャージ推奨

✅ 完了！`sk-`で始まるキーをコピーしたら次へ

---

### オプション B: Claude APIキー

**料金**: 1回の生成で約1-2円

#### ステップ1-B: Anthropic アカウント作成

1. [Anthropic Console](https://console.anthropic.com/) を開く
2. 「**Sign up**」をクリック
3. メールアドレスを入力、認証完了

#### ステップ2-B: APIキーを作成

1. ログイン後、「**API Keys**」をクリック
2. 「**Create Key**」をクリック
3. 名前を入力（例: `aws-support-bot`）
4. **キーをコピー**（`sk-ant-`で始まる文字列）
5. メモ帳などに安全に保存

✅ 完了！`sk-ant-`で始まるキーをコピーしたら次へ

---

## 🔐 準備2: GitHub SecretsにAPIキーを登録

**⏱ 所要時間**: 約2分

### ステップ1: Settingsを開く

1. GitHubリポジトリのページを開く
   - URLは `https://github.com/あなたのユーザー名/リポジトリ名` の形式
2. 画面上部のタブバーで「**Settings**」タブをクリック
   - 💡 タブの位置: `Code` - `Issues` - `Pull requests` - `Actions` - **`Settings`**
   - ⚠️ 見えない場合: リポジトリ管理者に「Write」権限をリクエスト

### ステップ2: Secrets設定画面を開く

1. 左サイドバーをスクロールダウン
2. 「**Security**」セクションを見つける
3. 「**Secrets and variables**」をクリックして展開（▶が▼になる）
4. その下に表示される「**Actions**」をクリック

📍 **画面構成イメージ**:
```
Settings (上部タブバー)
│
└─ 左サイドバー
   ├─ General
   ├─ Access
   │  ├─ Collaborators
   │  └─ ...
   ├─ Security ← ここを探す
   │  └─ Secrets and variables ← クリックして展開
   │     ├─ Actions ← ここをクリック
   │     ├─ Codespaces
   │     └─ Dependabot
   └─ ...
```

### ステップ3: Secretを追加

1. 画面右上の緑色の「**New repository secret**」ボタンをクリック
   - ボタンの位置: ページタイトル「Actions secrets and variables」の右側
2. フォームが表示されるので、以下を入力：

**OpenAI使用の場合**:
```
Name*: OPENAI_API_KEY
Secret*: sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

**Claude使用の場合**:
```
Name*: ANTHROPIC_API_KEY
Secret*: sk-ant-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

📝 **入力時の注意**:
- `Name` は**大文字で正確に**入力（コピー推奨）
- `Secret` には先ほどメモ帳にコピーしたAPIキーを貼り付け
- スペースや改行が入らないよう注意

3. 画面下部の「**Add secret**」ボタン（緑色）をクリック

### ステップ4: 確認

✅ **成功の目印**:
- 元の画面に戻る
- 「Repository secrets」リストに以下が表示される:
  ```
  OPENAI_API_KEY        Updated now by あなた
  ```
  または
  ```
  ANTHROPIC_API_KEY     Updated now by あなた
  ```
- 💡 登録後はキーの値（`sk-...`）は表示されません（セキュリティのため）
- 🔒 値を確認したい場合は削除して再登録が必要

⚠️ **よくあるミス**:
- `OPENAI_API_KEY` を `OpenAI_API_Key` と入力（大文字小文字が違う）→ 動作しません
- API Keyの前後にスペースが入っている → 動作しません
- 間違えた場合: Secret名をクリック → 「Update secret」で修正可能

✅ 完了！次へ

---

## 🏷️ 準備3: ラベルを作成

### ステップ1: ラベル設定画面を開く

1. リポジトリのトップページに戻る
2. 「**Issues**」タブをクリック
3. 画面右側の「**Labels**」をクリック

### ステップ2: 新しいラベルを作成

1. 「**New label**」ボタンをクリック
2. 以下を入力：

```
Label name: aws-support
Description: AWS support automation
Color: #0075ca
```

3. 「**Create label**」ボタンをクリック

### ステップ3: 確認

- ラベル一覧に青色の「**aws-support**」が表示されればOK

✅ 完了！次へ

---

## ⚙️ 準備4: GitHub Actionsを有効化

### ステップ1: Actions設定を開く

1. 「**Settings**」タブをクリック
2. 左サイドバーの「**Actions**」→「**General**」をクリック

### ステップ2: Actions を有効化

1. 「**Actions permissions**」セクションを確認
2. 「**Allow all actions and reusable workflows**」を選択
3. 画面下部の「**Save**」ボタンをクリック

### ステップ3: 確認

1. リポジトリのトップページに戻る
2. 「**Actions**」タブをクリック
3. 以下のワークフローが表示されればOK:
   - 「AWS Support Request Auto-Generator (MVP)」
   - 「AWS Support Request Auto-Retry」

✅ 完了！準備完了です！

---

## 🎉 使ってみよう！

### ステップ1: 最初のIssueを作成

1. 「**Issues**」タブをクリック
2. 「**New issue**」ボタン（緑色）をクリック
3. テンプレート一覧から「**AWS サポート問い合わせ**」を選択
4. 「**Get started**」ボタンをクリック

### ステップ2: フォームに記入

以下は**テスト用の記入例**です。実際の問題がない場合、これをコピーして使ってください：

```
Title: [AWS Support] EC2インスタンス起動テスト

問い合わせカテゴリ: 障害調査
重要度: Normal（通常）
対象AWSサービス: EC2
事象の概要: これはテスト用のIssueです。EC2インスタンスの起動に失敗しています。

詳細説明:
- 発生日時: 2025-10-24 10:00 JST
- エラーメッセージ: "InsufficientInstanceCapacity"
- インスタンスタイプ: t3.large
- リージョン: ap-northeast-1

再現手順:
1. EC2コンソールを開く
2. 「インスタンスを起動」をクリック
3. t3.largeを選択
4. 「起動」ボタンをクリック
5. エラーが表示される

試した対処方法:
- 別のAvailability Zone（ap-northeast-1a → 1c）で試行 → 同じエラー
- インスタンスタイプをt3.mediumに変更 → 改善せず
```

### ステップ3: ラベルを追加

1. 画面右側の「**Labels**」をクリック
2. 「**aws-support**」を選択（チェックマークが付く）

### ステップ4: Issueを投稿

1. 「**Submit new issue**」ボタン（緑色）をクリック

✅ Issue作成完了！

---

## ⏳ ステップ5: AI生成を待つ（約30秒〜1分）

### 何が起こるか？

Issueを作成すると、裏で以下が自動実行されます：

1. GitHub Actionsが起動
2. Issueの内容を読み取る
3. AIに問い合わせ文を生成させる
4. 結果をIssueコメントに投稿

### 進捗の確認方法

**方法1**: Issueページで待つ
- Issueページを開いたまま、30秒〜1分待つ
- 自動的にコメントが追加される

**方法2**: Actions タブで確認
1. 「**Actions**」タブをクリック
2. 一番上のワークフロー（黄色い丸 🟡 = 実行中）をクリック
3. 実行ログが表示される
4. 緑色のチェックマーク ✅ が表示されれば成功

---

## ✨ ステップ6: 生成結果を確認

### 成功した場合

Issueページに以下のようなコメントが自動投稿されます：

```markdown
## 🤖 AI生成 - AWSサポート問い合わせ文

以下の問い合わせ文が自動生成されました。内容を確認し、必要に応じて修正してからAWSサポートに送信してください。

---

## 件名
EC2インスタンス起動失敗（InsufficientInstanceCapacity）に関する調査依頼

## 問題の概要
本番環境にてEC2インスタンス（t3.large）の起動が失敗し、
"InsufficientInstanceCapacity"エラーが発生しております。

## 詳細な説明
- 発生日時: 2025-10-24 10:00 JST
- 対象サービス: Amazon EC2
- インスタンスタイプ: t3.large
- リージョン: ap-northeast-1
- エラーメッセージ: "InsufficientInstanceCapacity"

## 再現手順
1. EC2コンソールを開く
2. 「インスタンスを起動」をクリック
...

---

*このコメントはAI（openai）により自動生成されました。*
*生成日時: 2025-10-24T02:50:00.000Z*
```

### 使い方

1. 生成された問い合わせ文をコピー
2. AWSサポートコンソールにペースト
3. または、GitHub Issue上で記録として保持

✅ 完了！これでAWSサポートやりとりくんが使えるようになりました！

---

## 🎓 2回目以降の使い方（簡単！）

セットアップは1回だけ！次回からは超簡単：

### たった3ステップ

1. **Issues** → **New issue** → **AWS サポート問い合わせ**
2. フォームに記入して **Submit**
3. 30秒待つ → コメントに生成結果が投稿される

それだけ！

---

## ❌ うまくいかない時（トラブルシューティング）

### 問題1: コメントが投稿されない

**症状**: Issueを作成しても、AIのコメントが追加されない

**チェックリスト**:
- [ ] `aws-support` ラベルを付け忘れていませんか？
  - **解決策**: Issueを開いて、右側の「Labels」から「aws-support」を追加
- [ ] GitHub Actions が有効ですか？
  - **確認方法**: Settings → Actions → General → 「Allow all actions」が選択されているか
- [ ] API Key が正しく設定されていますか？
  - **確認方法**: Settings → Secrets and variables → Actions で確認

### 問題2: レート制限エラー

**症状**: 「APIレート制限に到達しました」というコメントが投稿される

**原因**: APIの無料枠を使い切った、または短時間に多数のリクエスト

**解決策**:
1. **何もしない**（推奨）
   - 30分ごとに自動リトライされます
   - 制限解除後、自動的に再実行されます

2. **すぐに再実行したい場合**:
   - Issueの任意のフィールドを編集（スペース1つ追加でもOK）
   - 保存すると自動的に再実行されます

3. **APIクォータを確認**:
   - OpenAI: https://platform.openai.com/usage
   - チャージ額を増やす

### 問題3: エラーメッセージが表示される

**症状**: Actionsタブで赤い × が表示される

**解決策**:
1. Actionsタブでエラーログを確認
2. エラーメッセージをコピー
3. GitHub Issueで質問（バグ報告テンプレート使用）

### 問題4: 生成された文章の質が悪い

**症状**: 生成された問い合わせ文が期待と違う、情報が不足

**解決策**:
1. **Issueをより詳しく書く**:
   - 「詳細説明」を具体的に
   - エラーメッセージは正確にコピー
   - スクリーンショットのURLを追加

2. **Issueを編集して再生成**:
   - Issueを編集（情報追加）
   - 保存すると自動的に再生成される

3. **手動で修正**:
   - 生成された文章をベースに、手動で編集
   - コピーしてAWSサポートに送信

---

## 🔧 トラブルシューティング（よくあるエラー）

### エラー1: ワークフローが実行されない

**症状**:
- Issueを作成したが、30秒待ってもコメントが投稿されない
- Actions タブに実行履歴がない

**原因と解決策**:

| 原因 | 確認方法 | 解決策 |
|------|---------|--------|
| `aws-support` ラベルが付いていない | Issueページ右側のLabelsを確認 | ラベルを追加して保存 |
| GitHub Actions が無効 | Settings > Actions > General | 「Allow all actions」を選択 |
| ワークフローファイルが存在しない | `.github/workflows/aws-support-auto.yml` を確認 | ファイルを追加してコミット |

**解決手順**:
```bash
1. Issueページを開く
2. 右側の「Labels」をクリック
3. 「aws-support」にチェック
4. ページを再読み込み
5. 1-2分待つ
```

---

### エラー2: API Key エラー

**症状**:
- Actions ログに「API Key エラー」が表示される
- コメントに「APIレート制限に到達しました」と表示される

**エラーメッセージ例**:
```
Error: AI API key is required
Error: Invalid API key
Error: Rate limit exceeded
```

**解決策**:

**ケース1: API Keyが未設定**
```bash
1. Settings > Secrets and variables > Actions
2. OPENAI_API_KEY または ANTHROPIC_API_KEY が存在するか確認
3. ない場合: 「準備2」の手順に従って登録
```

**ケース2: API Keyが間違っている**
```bash
1. OpenAI/Anthropic のダッシュボードで新しいキーを作成
2. GitHub Secrets で古いキーを削除
3. 新しいキーを登録
4. Issueを編集して保存（再実行される）
```

**ケース3: レート制限（利用回数超過）**
```bash
1. OpenAI/Anthropic のダッシュボードで利用状況を確認
2. 料金プランを確認（残高不足の可能性）
3. 30分〜1時間待つ
4. 自動リトライ機能が30分ごとに再実行
```

---

### エラー3: 生成された文章が不適切

**症状**:
- AIが生成した問い合わせ文が的外れ
- 情報が不足している
- フォーマットが崩れている

**解決策**:

**方法1: Issue本文を詳細にする**
```bash
1. Issueページ右上の「...」→「Edit」をクリック
2. 以下を追加:
   - エラーメッセージ（正確にコピー）
   - スクリーンショットのURL
   - 試した対処方法を具体的に記述
3. 「Update comment」で保存
4. 自動的に再生成される
```

**方法2: 手動で修正する**
```bash
1. AIが生成したコメントをコピー
2. 不足している情報を追加
3. 不要な部分を削除
4. AWSサポートに送信
```

---

### エラー4: GitHub Secrets が見つからない

**症状**:
- Settings タブが表示されない
- Secrets and variables が見つからない

**原因**:
- リポジトリへの権限不足（Read権限のみ）

**解決策**:
```bash
1. リポジトリ管理者に連絡
2. 「Write」または「Admin」権限をリクエスト
3. 権限付与後、ブラウザを再読み込み
4. Settings タブが表示されることを確認
```

---

### エラー5: Actions ワークフローが失敗する

**症状**:
- Actions タブに赤い ❌ マーク
- ログに「Error」が表示される

**確認手順**:
```bash
1. Actions タブを開く
2. 失敗したワークフローをクリック
3. 「generate-support-request」ジョブをクリック
4. ログを展開してエラーメッセージを確認
```

**よくあるエラーと解決策**:

| エラーメッセージ | 原因 | 解決策 |
|----------------|------|--------|
| `ISSUE_BODY is required` | Issueの本文が空 | テンプレートに従って記入 |
| `GITHUB_TOKEN` エラー | トークンの権限不足 | 通常は自動付与されるため、管理者に確認 |
| `Network error` | インターネット接続問題 | 一時的な問題の可能性、数分後に再実行 |

---

## ❓ FAQ（よくある質問）

### Q1: 料金はいくらかかりますか？

**A**: OpenAI/Claude API の料金のみかかります。

- **OpenAI (GPT-4)**: 1回の生成で約2-3円
- **Claude (Sonnet)**: 1回の生成で約1-2円
- **GitHub Actions**: 無料枠内で十分（月2,000分まで無料）

**目安**:
- 月10回使用: 約20-30円
- 月100回使用: 約200-300円

### Q2: 複数のリポジトリで使えますか？

**A**: はい、使えます。

**手順**:
```bash
1. 各リポジトリに .github/workflows/ をコピー
2. 各リポジトリで GitHub Secrets を設定
3. 同じAPI Keyを使い回し可能
```

**注意**: API Keyは複数リポジトリで共有できますが、利用回数は合算されます。

### Q3: プライベートリポジトリでも使えますか？

**A**: はい、使えます。

- GitHub Actions はプライベートリポジトリでも動作します
- 無料枠: 月2,000分（プライベートリポジトリでも同様）
- API Key は外部に漏れません（GitHub Secrets で暗号化）

### Q4: チーム全員で使いたいのですが？

**A**: 可能です。推奨セットアップ:

**方法1: 個人APIキー**
```bash
- 各メンバーが自分のAPI Keyを取得
- GitHub Secrets に各自のキーを登録
- 料金は各自負担
```

**方法2: チーム共有APIキー**
```bash
- チーム用のOpenAI/Claudeアカウントを作成
- 管理者がGitHub Secretsに登録
- 料金をチームで負担
```

**推奨**: 方法2（管理が簡単）

### Q5: 日本語以外の言語にも対応していますか？

**A**: 現在は日本語のみ最適化されています。

**英語で使う場合**:
```bash
1. Issueを英語で記入
2. AIが自動的に英語で生成
3. ただし、プロンプトは日本語ベースのため、品質は若干低下
```

**将来対応予定**: 多言語対応は Phase 2 で実装予定

---

## 📚 もっと詳しく知りたい方へ

### 技術的な詳細

- **完全版README**: [`docs/AWS_SUPPORT_AUTO_README.md`](./AWS_SUPPORT_AUTO_README.md)
- **リトライ機能の仕組み**: 完全版README「レート制限対応」参照
- **カスタマイズ方法**: 将来的にドキュメント追加予定

### よくある使用例

**障害調査（緊急）**:
```
問い合わせカテゴリ: 障害調査
重要度: Critical（緊急）
対象AWSサービス: RDS
事象の概要: データベース接続エラーが頻発し、サービスが停止しています
```

**技術質問**:
```
問い合わせカテゴリ: 技術質問
重要度: Normal（通常）
対象AWSサービス: Lambda
事象の概要: Lambda関数のタイムアウト設定のベストプラクティスについて
```

**ベストプラクティス相談**:
```
問い合わせカテゴリ: ベストプラクティス相談
重要度: Low（低）
対象AWSサービス: S3
事象の概要: 大容量ファイル（10GB+）の効率的なアップロード方法について
```

---

## 🆘 困ったときは

1. ✅ **このガイドのトラブルシューティングを確認**
2. ✅ **FAQ を読む**
3. ✅ **完全版README を確認** → より詳しい技術情報
4. ✅ **Actions ログを確認** → エラーメッセージを探す
5. ✅ **GitHub Issue で質問** → バグ報告テンプレート使用

---

## 🎊 おめでとうございます！

これで「AWSサポートやりとりくん」を使いこなせるようになりました！

### 次のステップ

1. ✅ 実際のAWS問題で使ってみる
2. ✅ チームメンバーに共有する
3. ✅ フィードバックをIssueで報告する

---

**🌸 Miyabi Autonomous Operations** - Beauty in Autonomous Development

*このガイドはGitHub初心者の方でも安心して使えるように作成されました。*
*わからないことがあれば、遠慮なくIssueで質問してください！*
*一緒に改善していきましょう 🚀*
